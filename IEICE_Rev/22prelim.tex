\subsection{Characteristic sets}\label{subsec:charsets}

\begin{dfn}
    Let $\C$ be a class of languages, $L$ a language in $\C$ and
    $S$ a non-empty finite subset of $L$.
    We say that $S$ is a \textit{characteristic} set of $L$ within $\C$
    if for any $L' \in \C$,
    $S \subseteq L'$ implies $L \subseteq L'$.
\end{dfn}

Let $n$ be a positive integer and $p$ a regular pattern. 
We denote by $S_{n}(p)$ the set of all strings in $\Sigma^{\ast}$ obtained by replacing all variable symbols in $p$
with strings in $\Sigma^{+}$ of length at most $n$.
Moreover, for a positive integer $n$ and a set $P \in \RPatplus$, 
let $S_{n}(P)=\bigcup_{p \in P}S_{n}(p)$.
It is clear that $S_{n}(P) \subseteq S_{n+1}(P) \subseteq L(P)$ for any positive integer $n$.

\begin{thm}[Sato et al.(Theorem 8, \cite{Sato1})]
    Let $k$ be a positive integer and $P \in \RPatkei$.
    Then, there exists a positive integer $n$ such that $S_{n}(P)$ is a characteristic set of $L(P)$ within $\RPatLkei$.
\end{thm}

\begin{thm}[Sato et al.(Lemma 9, \cite{Sato1})]\label{Sato1:Lemma9}
    Let $p$, $q$, $p_{1}$, $p_{2}$, $q_{1}$, $q_{2}$, $q_{3}$ be regular patterns in $\RPat$ and $x$ a variable symbol such that 
    $p = p_{1}xp_{2}$ and $q = q_{1}q_{2}q_{3}$ hold.
    Then $p \preceq q$ if the following three conditions $(\mathrm{i}),~(\mathrm{ii})$ and $(\mathrm{iii})$ are holds:
    \[
        \begin{tabular}{ll}
            $(\mathrm{i})$ $p_{1} \preceq q_{1}q_{2},$
            $(\mathrm{ii})$ $p_{2} \preceq q_{2}q_{3},$ \\
            $(\mathrm{iii})$ $q_{2}$ contains at least one variable symbol.
        \end{tabular}
    \]
\end{thm}

\begin{lem}[Sato et al.(Lemma 10, \cite{Sato1})]\label{Sato1:Lemma10}
    Suppose $\sharp \Sigma \geq 3$.
    Let $p_{1}$, $p_{2}$, $q$ be regular patterns in $\RPat$ and $x$ a variable symbol. 
    Let $a$, $b$ and $c$ be mutually distinct constant symbols in $\Sigma$.
    If $p_{1}ap_{2} \preceq q$, $\ p_{1}bp_{2} \preceq q$ and $p_{1}cp_{2} \preceq q$, then $ p_{1}xp_{2}\preceq q$ holds.
\end{lem}

From Lemma~\ref{Sato1:Lemma10}, the following theorem holds.
\begin{thm}[Sato et al.(Theorem {\color{red} 11}, \cite{Sato1})]\label{Sato1:Theorem11}
    Let $k$ be a positive integer. Suppose $\sharp\Sigma \geq 2k+1$.
    For $P \in \RPatplus$ and $Q \in \RPatkei$, 
    the following (i), (ii) and (iii) are equivalent:
    \[
        (\mathrm{i})\ S_{1}(P) \subseteq L(Q),\ \
        (\mathrm{ii})\ P \sqsubseteq Q,\ \
        (\mathrm{iii})\ L(P) \subseteq L(Q).
    \]
\end{thm}

From Theorem~\ref{Sato1:Theorem11},
we have the following corollary.
\begin{col}[Sato et al.(Corollary 12, \cite{Sato1})]
    Suppose $\sharp\Sigma \geq 3$.
    For two regular patterns $p$ and $q$,
    the following $(\mathrm{i}), (\mathrm{ii})$ and $(\mathrm{iii})$ are equivalent:
    \[
        (\mathrm{i})\ S_{1}(p) \subseteq L(q),\ \
        (\mathrm{ii})\ p \preceq q,\ \
        (\mathrm{iii})\ L(p) \subseteq L(q).
    \]
\end{col}

{\color{red} The following lemma demonstrates that Theorem \ref{Sato1:Theorem11} does not hold in general when $\sharp\Sigma \leq 2k$.}
\begin{lem}[Sato et al.(Lemma 13, \cite{Sato1})]\label{Sato1:Lemma13}
    Suppose $\sharp\Sigma \geq 3$.
    Let $p_{1}$, $p_{2}$, $q_{1}$, $q_{2}$ be regular patterns in $\RPat$ and $x$ a variable symbol.
    Let $a$, $b$ be constant symbols in $\Sigma$ with $a \neq b$ and $w$ a string {\color{red}in} $\Sigma^{\ast}$.
    Let $p = p_{1}AwxwBp_{2}$ and $q = q_{1}AwBq_{2}$ be regular patterns that satisfy the following three conditions:
    \[
        \begin{tabular}{ll}
            $\mathrm{(i)}~p_{1}Aw \preceq q_{1}$,  \\ 
            $\mathrm{(ii)}~wBp_{2} \preceq q_{2}$, \\
            $\mathrm{(iii)}$ 
            $(A,B)\in \{(a,b),(b,a)\}$.
        \end{tabular}
    \]
    Then, we have that $p\{x:=a\} \preceq q$ and $p\{x:=b\} \preceq q$ hold 
    but $p \not\preceq q$.
\end{lem}

The following Example \ref{counter-example4Theorem11} in \cite{Sato1} shows that Theorem~\ref{Sato1:Theorem11} does not hold 
{\color{red} when $\sharp\Sigma\leq 2k$.}

%****** mukouchi 227ページ
\begin{ex}\label{counter-example4Theorem11}
    Let $k$ be a positive integer and $\Sigma= \{a_{1},\ldots,a_{k},b_{1},\ldots,b_{k}\}$.
    Let $w_{1},\ldots,w_{k}$ be regular patterns in $\RPat$ such that 
    $w_{k} = \varepsilon$ and for $i=1,2,\ldots,k-1$, $w_{i} = w_{i+1}b_{i+1}a_{i+1}w_{i+1}$ hold.
    Let $p$, $q_{1},\ldots,q_{k}$ be regular patterns in $\RPat$ such that
    $p = x_{1}a_{1}w_{1}xw_{1}b_{1}x_{2}$ and  for $i=1,2,\ldots,k$, $q_{i} = x_{1}a_{i}w_{i}b_{i}x_{2}$ hold.
    Let $Q$ be a set $\{q_{1},\ldots,q_{k}\}$ in $\RPatkei$.
    For $i=1$, we have $p\{x:=a_{1}\} =(x_{1}a_{1}w_{1})a_{1}(w_{1}b_{1}x_{2})=q_1\{x_{1}:=x_{1}a_{1}w_{1}\}\preceq q_{1}$.
    For $i\geq 2$, from the definition of $w_{i}$,
    we easily see that $w_{1}=(w_{i}b_{i})w^{(i)}=w{'(i)}(a_{i}w_{i})$ for some strings $w^{(i)}$ and $w^{'(i)}$.
    Then, for each $i\geq 2$, 
    \begin{eqnarray*}
        p \{ x:=a_{i} \} & = & (x_{1}a_{1}w_{1})a_{i}(w_{1}b_{1}x_{2})\\
        & = & (x_{1}a_{1}w_{1})a_{i}(w_{i}b_{i}w^{(i)})b_{1}x_{2}\\
        & = & (x_{1}a_{1}w_{1})(a_{i}w_{i}b_{i})(w^{(i)}b_{1}x_{2})\\
        & = & q_{i} \{ x_{1} := x_{1}a_{1}w_{1}, x_{2} := w^{(i)}b_{1}x_{2} \}\\
        & \preceq & q_{i},\\
        p \{ x:=b_{i} \} & = & (x_{1}a_{1}w_{1})b_{i}(w_{1}b_{1}x_{2})\\
        & = & x_{1}a_{1}(w^{\prime (i)}a_{i}w_{i})b_{i}(w_{1}b_{1}x_{2}) \\
        & = & (x_{1}a_{1}w^{\prime (i)})a_{i}w_{i}b_{i}(w_{1}b_{1}x_{2}) \\
        & = & q_{i} \{ x_{1} := x_{1}a_{1}w^{\prime (i)}, x_{2} := w_{1}b_{1}x_{2} \}\\
        & \preceq & q_{i}.
    \end{eqnarray*}
%
   Hence, $S_{1}(p) \subseteq L(Q)$ holds.
   However, from $p \not \preceq q_{i}$, $L(p) \not \subseteq L(q_{i})$ holds for each $i=1,2,\ldots,k$.
\end{ex}

